---
layout:     post
title:      "IM好友关系业务"
date:       2019-01-01
author:     "phantomVK"
header-img: "img/bg/post_bg.jpg"
catalog:    true
tags:
    - IM
---

即时通讯软件，作为最贴近网民习惯的应用，见证中国乃至国际互联网的发展。在即使通讯软件出现之前，经历了寻呼机、手机短信、邮件的过程。其中寻呼机现在几乎灭迹，短信的发送量也比即使通讯兴起之前减少很多。现在，剩下邮件还迸发蓬勃的升级。

早期台式机互联网的连通，国外先出现ICQ。国内则出现了OICQ，因名称有侵权之疑而改名，即现为人熟悉的”腾讯QQ“。随后很久一段时间，国内也没有其他即时通讯软件取代QQ。直到张小龙在腾讯推出微信，QQ终于有个能互相吵闹的亲兄弟。但纵观国内互联网即使通讯巨头，除了QQ和微信，为平民所知的产品几乎没有。



时间来到当今，即时通讯的分类比当年更加细化。QQ和微信牢牢控制消费级市场，企业微信和钉钉则占领商业公司的业务；普通的社交媒体，例如Facebook、微博、Linkedin也包含聊天模块支撑社交业务。此外，很多移动端应用在场景上也对即时通讯有一定需求，发展出第三方聊天功能的SDK，如网易运行、环信等等。

![products_logo](/img/business/friend_relationship/products_logo.png)

IM面向不同领域有不同要求，企业端用户要求直接聊天无需添加好友，零售端要求则要求用户发出和接收邀请。更底层的还有通讯协议的设计实现、与网络运营商的合作等。如果一味想自己IM但不考虑各种困难，毫无疑问做出来的产品体验极差。

本文则只挑选好友关系的业务部分，以微信为范本反向推测实现逻辑，起到抛砖引玉的作用。具体实现需要根据市场方向和产品定位进行调整。



<UserId_A, UserId_B> 与 <UserId_B, UserId_A> 关系

排序 UserId_A > UserId_B

没有记录一定不是好友，有记录则需要根据状态确定是否为好友
